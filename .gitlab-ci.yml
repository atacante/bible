stages:
 - dev
 - alpha
 - beta
 - live

job_for_dev:
  stage: dev
  script:
    - hostname
    - pwd
    - sh /var/www/clients/client3/web1/home/cleartech1/simple-deploy.sh
  only:
    - dev
  tags:
    - dev
  environment: dev

job_for_alpha:
  stage: alpha
  before_script:
    - php -v
    - export PATH=/opt/remi/php56/root/bin/:$PATH
  script:
    - hostname
    - pwd
    - php -v
  only:
    - alpha
  tags:
    - alpha
  environment: qa

job_for_beta:
  stage: beta
  before_script:
    - php -v
    - export PATH=/opt/remi/php56/root/bin/:$PATH
  script:
    - hostname
    - pwd
    - php -v
    - cd $HOME/web && git pull origin beta 
    - cd $HOME/web && php artisan migrate --force --no-interaction
    - cd $HOME/web && php artisan asset:dist
  only:
    - beta
  tags:
    - beta
  environment: staging

#job_for_live:
  stage: live
  before_script:
    - php -v
    - export PATH=/opt/remi/php56/root/bin/:$PATH
  script:
    - hostname
    - pwd
    - php -v
  only:
    - master
  tags:
    - live
  environment: production
